# Pyokemon TCG 项目简介 (README_CN.md)

（英文版README请见 [README_EN.md](README_EN.md)，西班牙语版请见 [README_ES.md](README.md)。）

## 项目介绍

**Pyokemon TCG** 是一个使用 Python 和 PyGame 开发的宝可梦集换式卡牌游戏模拟器，定位于教育和学习用途。该项目非官方、非商业，旨在通过还原宝可梦卡牌游戏的核心机制来帮助初学者学习游戏开发。Pyokemon TCG 作为一个教学示例，展示了如何构建包含用户登录、GUI界面、回合制逻辑以及API数据获取等功能的完整游戏项目。项目采用模块化架构和良好的编码规范，使其既可玩又方便阅读理解，非常适合用作学习 Python 游戏开发的参考。

## 功能概览

- **用户注册与登录**：提供用户账户系统，新用户可以注册账户，已注册用户可登录。用户资料和游戏进度通过 SQLite 数据库保存在本地。登录过程由 AuthManager 管理，确保不同界面间无需手动传递用户凭据。

- **卡牌图鉴（Pokédex）**：图鉴系统以图形界面展示玩家收集的所有宝可梦卡牌。玩家可以浏览所有卡牌的缩略图，并通过筛选（已拥有/未收集、稀有度、属性等）查看特定卡片。为优化性能，图鉴采用了图像缓存机制，大量卡牌同时显示时仍能保持流畅。

- **界面导航与场景切换**：游戏内置统一的导航栏，可在各主要界面之间平滑切换，包括主页、图鉴、商店、战斗准备等。导航栏通常位于窗口顶端或底部，含图标按钮代表不同模块。Pyokemon TCG 基于模块化场景管理，每个场景对应一个界面逻辑，实现界面解耦和流畅过渡。

- **卡包购买与开启**：模拟宝可梦卡包的购买和开包体验。玩家可在游戏内的商店购买卡包（使用虚拟货币），并进入开包界面。开包时有专门的动画效果，玩家点击未打开的卡包，会“撕开”包装并随机展示获得的卡牌，直观有趣，还原实体卡牌开包的惊喜体验。

- **本地数据存储**：游戏进度均保存在本地设备，例如用户资料、已获得卡牌、构建的卡组、成就统计等都存储于 SQLite 数据库中。卡牌基础数据缓存在本地 JSON 文件中，初次获取后即可离线畅玩，无需持续联网。

- **卡牌爬虫工具**：提供一个独立的卡牌数据获取工具 `fetch_card_gui`，用于从 Pokémon TCG API 抓取卡牌数据并导入游戏。工具带有图形界面，可设定卡牌数量、输出目录等，运行后生成 `cards.json` 以及对应图片资源。

- **卡组构建（开发中）**：支持玩家通过图形化界面构建自定义卡组，挑选已拥有卡牌组成战斗牌组。功能目前尚在完善，未来将支持保存多个卡组并在战斗中使用。

- **本地战斗系统（开发中）**：计划实现单机的 1v1 回合制对战。已完成核心逻辑，并整合 `pygame-cards` 与 `pygame-gui` 构建战斗交互界面。战斗逻辑与界面模块化分离，便于将来拓展为联网战斗。

- **未来拓展**：架构支持扩展模块，例如：增加道具系统、任务系统、在线联机、卡牌交易、好友系统等。当前版本尚未实现，但已预留接口。

## 安装与依赖

**运行环境**：Python 3.10 或以上，推荐使用虚拟环境安装依赖。

**安装依赖**：

```bash
pip install -r requirements.txt
```

**主要依赖库**：

- `pygame` – 游戏主引擎，负责窗口、绘图、事件等
- `pygame-gui` – 构建界面所用 GUI 库
- `pygame-cards` – 卡牌显示与动画
- `requests` – 用于调用卡牌 API
- `Pillow` – 图像处理

**辅助开发库**：

- `tkinter` – 构建爬虫 GUI（Python 内置）
- `opencv-python` – 图像处理辅助（开发工具用）
- `graphviz` – 生成目录结构图
- `tqdm` – 控制台进度条

**SQLite**：Python 内置支持，无需额外安装。

## 运行方法

启动主程序：

```bash
python main.py
```

运行卡牌获取工具：

```bash
python development/fetch_card/fetch_card_gui.py
```

该工具从 Pokémon TCG API 抓取卡牌数据，并保存至 `card_assets/cards.json` 和图片目录。

首次运行后即可离线畅玩。爬虫工具仅在初始填充或更新卡牌数据时使用。

## 项目目录结构

```
├── main.py
├── requirements.txt
├── README_CN.md
├── game/
│   ├── core/         # 核心逻辑（认证、数据库、战斗等）
│   ├── scenes/       # 各界面逻辑（登录、主页、战斗等）
│   ├── ui/           # 可重用 UI 组件（导航栏、卡牌显示）
│   └── utils/        # 工具函数与公共类
├── assets/
│   ├── images/       # 图片资源
│   ├── fonts/        # 字体
│   ├── sounds/       # 音效
│   └── json/         # JSON 配置文件
├── data/
│   ├── game_database.db   # 本地 SQLite 数据库
│   ├── cards.json         # 卡牌数据
│   └── cache/             # 图片缓存（如有）
├── development/
│   ├── fetch_card/
│   │   └── fetch_card_gui.py
│   └── generate_tree.py   # 目录结构生成器
└── docs/                  # 文档说明
```

## 开发背景与许可协议

**开发背景**：Pyokemon TCG 为毕业设计与教学实验项目，使用 Python 全栈构建一个可运行的卡牌游戏原型。强调 MVC 架构、模块化管理、API 集成、本地存储和图形界面整合，适合作为学习样例和参考源码。

**开源许可说明**：

- 该项目为 **非商业开源项目**，仅供学习、教学与个人使用。
- 所有 Pokémon 素材（卡图、名称等）版权归原权利方所有，仅作教育用途使用，**不得用于商业用途或发布**。
- 项目代码开放，可在遵守前提下自行修改、引用，但请注明来源。

---

祝你在 Python 学习之路上玩得开心、学得扎实！欢迎一起进入 Pyokemon 的世界！
